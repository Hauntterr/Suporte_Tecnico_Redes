<!DOCTYPE html>
<html lang="zxx">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="Videograph Template" />
    <meta name="keywords" content="Videograph, unica, creative, html" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="img/hero/technological.png" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Home</title>

    <!-- Google Font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Play:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Css Styles -->
    <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="css/font-awesome.min.css" type="text/css" />
    <link rel="stylesheet" href="css/elegant-icons.css" type="text/css" />
    <link rel="stylesheet" href="css/owl.carousel.min.css" type="text/css" />
    <link rel="stylesheet" href="css/magnific-popup.css" type="text/css" />
    <link rel="stylesheet" href="css/slicknav.min.css" type="text/css" />
    <link rel="stylesheet" href="css/style.css" type="text/css" />
  </head>

  <body>
    <!-- Page Preloder -->
    <div id="preloder">
      <div class="loader"></div>
    </div>

    <!-- Header Section Begin -->
    <header class="header">
      <div class="container">
          <div class="row">
              <div class="col-lg-2">
                  <div class="header__logo">
                      <a href="./index.html"><img src="img/logo.png" alt=""></a>
                  </div>
              </div>
              <div class="col-lg-10">
                  <div class="header__nav__option">
                      <nav class="header__nav__menu mobile-menu">
                          <ul>
                              <li><a href="./index.html">Home</a></li>
                              <li><a href="./about.html">Sobre</a></li>
                              <li><a href="./services.html">Formação</a></li>
                              <li><a href="./portfolio.html">Mercado</a></li>
                              <li><a href="./services.html">Referências</a></li>
                              <li class="active"><a href="./contact.html">Contato</a></li>
                          </ul>
                      </nav>
                
                  </div>
              </div>
          </div>
          <div id="mobile-menu-wrap"></div>
      </div>
  </header>
    <!-- Header End -->

    <!-- Breadcrumb Begin -->
    <div class="breadcrumb-option spad set-bg" data-setbg="img/breadcrumb-bg.jpg">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <div class="breadcrumb__text">
                        <h2>Contato</h2>
                        <div class="breadcrumb__links">
                            <a href="#">Home</a>
                            <span>Contato</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Breadcrumb End -->

    <!-- Contact Widget Section Begin -->
    <section class="contact-widget spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-md-6 col-md-6 col-md-3">
                    <div class="contact__widget__item">
                        <div class="contact__widget__item__icon">
                            <i class="fa fa-map-marker"></i>
                        </div>
                        <div class="contact__widget__item__text">
                            <h4>Endereço</h4>
                            <p>Rua Tal, 65164 São Janeiro</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 col-md-6 col-md-3">
                    <div class="contact__widget__item">
                        <div class="contact__widget__item__icon">
                            <i class="fa fa-phone"></i>
                        </div>
                        <div class="contact__widget__item__text">
                            <h4>Telefone</h4>
                            <p>99 99 999-9999 • 00 00 000-0000</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 col-md-6 col-md-3">
                    <div class="contact__widget__item">
                        <div class="contact__widget__item__icon">
                            <i class="fa fa-map-marker"></i>
                        </div>
                        <div class="contact__widget__item__text">
                            <h4>Email</h4>
                            <p>redesgb@gmail.com</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Contact Widget Section End -->

    <!-- Call To Action Section Begin -->
    <section class="contact spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 col-md-6">
                    <div class="contact__form">
                        <h3>Adicionar Arquivo</h3>
                        <form id="uploadForm">
                            <input type="text" id="nome" placeholder="Nome do Arquivo" required />
                                <input type="file" class="upload_arquivo" id="arquivo" required />
                                
                            <button type="submit" class="site-btn">Upload</button>
                        </form>

                        
                        <h3>Lista de Arquivos</h3>
                        <ul id="fileList" class="file-list">
                            <!-- Itens da lista serão adicionados dinamicamente via JavaScript -->
                        </ul>


                        <h3>Pré-visualização de Arquivo</h3>
                        <div id="filePreview"></div>
                        <iframe id="filePreview"  style="border:0;"></iframe>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6">
                    <div class="contact__form">
                        <h3>Entre em contato</h3>
                        <form action="#">
                            <input type="text" placeholder="Nome">
                            <input type="text" placeholder="Email">
                            <input type="text" placeholder="Website">
                            <textarea placeholder="Mensagem"></textarea>
                            <button type="submit" class="site-btn">Enviar</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Call To Action Section End -->

    <!-- Footer Section Begin -->
    <footer class="footer">
        <div class="container">
            <div class="footer__top">
                <div class="row">
                    <div class="col-lg-6 col-md-6">
                        <div class="footer__top__logo">
                            <a href="./index.html"><img src="img/logo.png" alt=""></a>
                        </div>
                    </div>
              
                </div>
            </div>
            <div class="footer__option">
                <div class="row">
                    <div class="col-lg-4 col-md-6 col-sm-6">
                        <div class="footer__option__item">
                            <h5>Sobre suporte técnico em redes</h5>
                            <p>O suporte técnico de redes é o encarregado de fazer com que os computadores 
                                e dispositivos de uma empresa possam se comunicar entre si de maneira eficaz e segura.</p>
                            <a href="./about.html" class="read__more">Leia mais<span class="arrow_right"></span></a>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-3 col-sm-3">
                        <div class="footer__option__item">
                            <h5>Formação nessa área</h5>
                            <ul>
                                <li><a href="./services.html">Formação</a></li>
                                
                            </ul>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-3 col-sm-3">
                        <div class="footer__option__item">
                            <h5>Mercado de trabalho</h5>
                            <ul>
                                <li><a href="./portfolio.html">Mercado</a></li>
                              
                            </ul>
                        </div>
                        
                    </div>
                    
                </div>
            </div>
            <div img align="right"><a href="#"><img src="img/hero/next.png" width="3%"></a></div>
            <div class="footer__copyright">
                <div class="row">
                    <div class="col-lg-12 text-center">
                        <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                        <p class="footer__copyright__text">Copyright &copy;
                            
                            - Giulia Batistela e Bryan Gimenes - Todos os Direitos Reservados | Trabalho sem fins lucrativos.
                        </p>
                        <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- Footer Section End -->

    <!-- Js Plugins -->
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/mixitup.min.js"></script>
    <script src="js/masonry.pkgd.min.js"></script>
    <script src="js/jquery.slicknav.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/main.js"></script>
</body>

</html>

<script>
    document.addEventListener('DOMContentLoaded', () => {
    const uploadForm = document.getElementById('uploadForm');
    const fileList = document.getElementById('fileList');
    const filePreview = document.getElementById('filePreview');

    const apiBaseUrl = 'https://localhost:7164/Arquivo';

    // Fetch and display files on page load
    fetchFiles();

    // Handle file upload
    uploadForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const nome = document.getElementById('nome').value;
        const file = document.getElementById('arquivo').files[0];

        if (!file) {
            alert("Selecione um arquivo para fazer o upload.");
            return;
        }

        const reader = new FileReader();
        reader.onloadend = async () => {
            const base64String = reader.result.split(',')[1];
            const arquivo = {
                nome: nome,
                arquivos: base64String
            };

            const response = await fetch(apiBaseUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(arquivo)
            });

            if (response.ok) {
                alert('Arquivo adicionado com sucesso!');
                fetchFiles();
            } else {
                alert('Erro ao adicionar arquivo.');
            }
        };
        reader.readAsDataURL(file);
    });

    // Fetch files from the server
    async function fetchFiles() {
        const response = await fetch(apiBaseUrl);
        const files = await response.json();
        fileList.innerHTML = '';

        files.forEach(file => {
            const listItem = document.createElement('li');
            listItem.innerHTML = `
                ${file.nome}
                <button onclick="viewFile('${file.arquivos}')">View</button>
                <button onclick="deleteFile(${file.id})">Delete</button>
            `;
            fileList.appendChild(listItem);
        });
    }

    // View file
    window.viewFile = (base64String) => {
        const objectElement = document.createElement('object');
        objectElement.data = 'data:application/pdf;base64,' + base64String;
        objectElement.type = 'application/pdf';
        objectElement.width = '100%';
        objectElement.height = '600px';

        filePreview.innerHTML = '';
        filePreview.appendChild(objectElement);
    };

    // Delete file
    window.deleteFile = async (id) => {
        const response = await fetch(`${apiBaseUrl}/${id}`, {
            method: 'DELETE'
        });

        if (response.ok) {
            alert('Arquivo excluído com sucesso!');
            fetchFiles();
        } else {
            alert('Erro ao excluir arquivo.');
        }
    };
});

</script>